(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2679:function(e,t,s){Promise.resolve().then(s.bind(s,3143))},3143:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Page}});var a=s(7437),i=s(2265),r=s(5470),l=s(1393),n=s(909),components_MeshVisualization=e=>{let{meshStats:t=[],onNodeClick:s}=e,[o,c]=(0,i.useState)(null),[d,m]=(0,i.useState)(!0),x=[...new Set(t.map(e=>e.orig_address))],h=t.filter(e=>"direct"===e.hop_status),u=t.filter(e=>"hop"===e.hop_status),getNodePosition=(e,t)=>{let s=2*Math.PI*e/t;return{x:200+150*Math.cos(s),y:200+150*Math.sin(s)}},getQualityInfo=e=>{let t=e/255*100;return t>=75?{color:"#22C55E",status:"Excellent"}:t>=50?{color:"#EAB308",status:"Good"}:t>=25?{color:"#F97316",status:"Fair"}:{color:"#EF4444",status:"Poor"}};return(0,a.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg shadow-xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Mesh Network Topology"})]}),(0,a.jsxs)("button",{onClick:()=>m(!d),className:"px-3 py-1.5 bg-gray-800 rounded-md text-sm text-gray-300 hover:bg-gray-700",children:[d?"Pause":"Start"," Animation"]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("svg",{width:"400",height:"400",className:"mx-auto",children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("filter",{id:"glow",children:[(0,a.jsx)("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),(0,a.jsxs)("feMerge",{children:[(0,a.jsx)("feMergeNode",{in:"coloredBlur"}),(0,a.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,a.jsx)("pattern",{id:"directPattern",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:(0,a.jsx)("path",{d:"M 0 0 L 4 0",stroke:"#3B82F6",strokeWidth:"2"})}),(0,a.jsx)("pattern",{id:"hopPattern",patternUnits:"userSpaceOnUse",width:"8",height:"8",children:(0,a.jsx)("path",{d:"M 0 0 L 8 0",stroke:"#8B5CF6",strokeWidth:"2",strokeDasharray:"4,4"})})]}),(0,a.jsx)("circle",{cx:"200",cy:"200",r:"180",fill:"none",stroke:"#1F2937",strokeWidth:"1"}),(0,a.jsx)("circle",{cx:"200",cy:"200",r:"120",fill:"none",stroke:"#1F2937",strokeWidth:"1"}),(0,a.jsxs)("g",{transform:"translate(20, 20)",children:[(0,a.jsx)("text",{x:"25",y:"10",fill:"#F3F4F6",fontSize:"12",fontWeight:"bold",children:"Connection Types:"}),(0,a.jsx)("line",{x1:"0",y1:"25",x2:"20",y2:"25",stroke:"#3B82F6",strokeWidth:"2"}),(0,a.jsx)("text",{x:"25",y:"30",fill:"#F3F4F6",fontSize:"12",children:"Direct Link"}),(0,a.jsx)("line",{x1:"0",y1:"45",x2:"20",y2:"45",stroke:"#8B5CF6",strokeWidth:"2",strokeDasharray:"4,4"}),(0,a.jsx)("text",{x:"25",y:"50",fill:"#F3F4F6",fontSize:"12",children:"Hop Link"})]}),h.map((e,t)=>{let s=x.indexOf(e.orig_address),i=getNodePosition(s,x.length);return getQualityInfo(e.tq),(0,a.jsxs)(r.E.g,{children:[(0,a.jsx)(r.E.line,{x1:i.x,y1:i.y,x2:"200",y2:"200",stroke:"#3B82F6",strokeWidth:"2",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.8},transition:{duration:1}}),(0,a.jsxs)("text",{x:(i.x+200)/2,y:(i.y+200)/2-10,fill:"#3B82F6",fontSize:"10",textAnchor:"middle",className:"pointer-events-none",children:["Direct (",Math.round(e.tq/255*100),"%)"]}),d&&(0,a.jsx)(r.E.circle,{r:"3",fill:"#3B82F6",filter:"url(#glow)",initial:{x:i.x,y:i.y},animate:{x:[i.x,200],y:[i.y,200],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:.5*t}})]},"direct-".concat(t))}),u.map((e,t)=>{let s=x.indexOf(e.orig_address),i=getNodePosition(s,x.length);getQualityInfo(e.tq);let l={x:(i.x+200)/2+(Math.random()-.5)*40,y:(i.y+200)/2+(Math.random()-.5)*40},n="M ".concat(i.x," ").concat(i.y," Q ").concat(l.x," ").concat(l.y," 200 200");return(0,a.jsxs)(r.E.g,{children:[(0,a.jsx)(r.E.path,{d:n,stroke:"#8B5CF6",strokeWidth:"2",strokeDasharray:"4,4",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.6},transition:{duration:1}}),(0,a.jsxs)("text",{x:l.x,y:l.y-10,fill:"#8B5CF6",fontSize:"10",textAnchor:"middle",className:"pointer-events-none",children:["Hop (",Math.round(e.tq/255*100),"%)"]}),d&&(0,a.jsx)(r.E.circle,{r:"3",fill:"#8B5CF6",filter:"url(#glow)",initial:{opacity:0},animate:{opacity:[0,1,0],offsetDistance:["0%","100%"]},transition:{duration:3,repeat:1/0,delay:.5*t},style:{offsetPath:'path("'.concat(n,'")'),offsetRotate:"auto"}})]},"hop-".concat(t))}),x.map((e,i)=>{let n=getNodePosition(i,x.length),d=t.filter(t=>t.orig_address===e),m=Math.max(...d.map(e=>e.tq)),h=getQualityInfo(m);return(0,a.jsxs)(r.E.g,{onMouseEnter:()=>c(e),onMouseLeave:()=>c(null),onClick:()=>s(e),whileHover:{scale:1.1},className:"cursor-pointer",children:[(0,a.jsx)("circle",{cx:n.x,cy:n.y,r:"10",fill:h.color,className:"stroke-white stroke-2",filter:"url(#glow)"}),(0,a.jsx)("text",{x:n.x,y:n.y+25,textAnchor:"middle",fill:"#9CA3AF",fontSize:"12",children:e.slice(-4)}),(0,a.jsx)(l.M,{children:o===e&&(0,a.jsxs)(r.E.g,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:[(0,a.jsx)("rect",{x:n.x-40,y:n.y-50,width:"80",height:"20",fill:"#1F2937",rx:"4"}),(0,a.jsxs)("text",{x:n.x,y:n.y-35,textAnchor:"middle",fill:"#F3F4F6",fontSize:"10",children:[e," - ",h.status]})]})})]},"node-".concat(e))})]}),(0,a.jsx)("div",{className:"absolute top-2 right-2 bg-gray-800/80 backdrop-blur p-3 rounded-lg z-10",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#22C55E]"}),(0,a.jsx)("span",{className:"text-xs text-gray-300",children:"Excellent (75-100%)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#EAB308]"}),(0,a.jsx)("span",{className:"text-xs text-gray-300",children:"Good (50-75%)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#F97316]"}),(0,a.jsx)("span",{className:"text-xs text-gray-300",children:"Fair (25-50%)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-[#EF4444]"}),(0,a.jsx)("span",{className:"text-xs text-gray-300",children:"Poor (0-25%)"})]})]})})]})]})},o=s(5253),c=s(8227),d=s(6573),m=s(4235),x=s(39),h=s(6812),u=s(9223),g=s(4253),p=s(7467),y=s(1570),j=s(6958);let MetricCard=e=>{let{title:t,value:s,unit:i="",subValue:r,icon:l,status:n,onClick:o}=e;return(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6 ".concat(o?"cursor-pointer hover:bg-gray-800 transition-colors":""),onClick:o,children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400 mb-2",children:[(0,a.jsx)(l,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"text-sm",children:t})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat((e=>{switch(e){case"critical":return"text-red-400";case"warning":return"text-yellow-400";default:return"text-white"}})(n)),children:["number"==typeof s?Number(s).toFixed(1):s,i]}),r&&(0,a.jsx)("div",{className:"text-xs text-gray-500",children:r}),o&&(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-300",children:"Click to show graph"})]})};var f=s(2545),b=s(1346),k=s(974);let formatTimestamp=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),RssiChart=e=>{let{data:t,displayChoice:s}=e;return(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:t,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"timestamp",type:"number",domain:["auto","auto"],tickFormatter:e=>new Date(1e3*e).toLocaleTimeString("en-US",{timeZone:"America/New_York",hour12:!0}),stroke:"#9CA3AF"}),(0,a.jsx)(x.B,{domain:[-90,-20],stroke:"#9CA3AF",label:{value:"RSSI (dBm)",angle:-90,position:"insideLeft"}}),(0,a.jsx)(h.u,{labelFormatter:e=>formatTimestamp(Number(e)),contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"0.5rem",color:"#F3F4F6"}}),("all"===s||"rssi"===s)&&(0,a.jsx)(u.x,{type:"monotone",dataKey:"rssi",stroke:"#3B82F6",name:"Overall RSSI",dot:!1,strokeWidth:2}),("all"===s||"ant1"===s)&&(0,a.jsx)(u.x,{type:"monotone",dataKey:"rssi_ant[0]",stroke:"#60A5FA",name:"Antenna 1",dot:!1,strokeWidth:2}),("all"===s||"ant2"===s)&&(0,a.jsx)(u.x,{type:"monotone",dataKey:"rssi_ant[1]",stroke:"#93C5FD",name:"Antenna 2",dot:!1,strokeWidth:2})]})})})},PacketLossChart=e=>{let{data:t,displayChoice:s}=e;return(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(f.c,{data:t,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"timestamp",type:"number",domain:["auto","auto"],tickFormatter:e=>new Date(1e3*e).toLocaleTimeString("en-US",{timeZone:"America/New_York",hour12:!0}),stroke:"#9CA3AF"}),"all"===s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.B,{yAxisId:"left",domain:[0,"auto"],stroke:"#9CA3AF",label:{value:"Packet Loss Ratio",angle:-90,position:"insideLeft"}}),(0,a.jsx)(x.B,{yAxisId:"right",orientation:"right",domain:[0,"auto"],stroke:"#9CA3AF",label:{value:"Tx Retries",angle:-90,position:"insideRight"}})]}):"pl"===s?(0,a.jsx)(x.B,{domain:[0,"auto"],stroke:"#9CA3AF",label:{value:"Packet Loss Ratio",angle:-90,position:"insideLeft"}}):(0,a.jsx)(x.B,{domain:[0,"auto"],stroke:"#9CA3AF",label:{value:"Tx Retries",angle:-90,position:"insideLeft"}}),(0,a.jsx)(h.u,{labelFormatter:e=>formatTimestamp(Number(e)),contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"0.5rem",color:"#F3F4F6"}}),("all"===s||"pl"===s)&&(0,a.jsx)(b.$,{dataKey:"pl_ratio",barSize:20,fill:"#EF4444",name:"Packet Loss Ratio",yAxisId:"all"===s?"left":void 0}),("all"===s||"retries"===s)&&(0,a.jsx)(u.x,{dataKey:"tx_retries",stroke:"#F59E0B",dot:!1,strokeWidth:2,name:"Retries",yAxisId:"all"===s?"right":void 0})]})})})},McsChart=e=>{let{data:t}=e;return(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:t,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"timestamp",type:"number",domain:["auto","auto"],tickFormatter:e=>new Date(1e3*e).toLocaleTimeString("en-US",{timeZone:"America/New_York",hour12:!0}),stroke:"#9CA3AF"}),(0,a.jsx)(x.B,{domain:[0,15],stroke:"#9CA3AF",label:{value:"MCS Index",angle:-90,position:"insideLeft"},ticks:[0,3,7,11,15]}),(0,a.jsx)(h.u,{labelFormatter:e=>formatTimestamp(Number(e)),contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"0.5rem",color:"#F3F4F6"}}),(0,a.jsx)(u.x,{type:"stepAfter",dataKey:"mcs",stroke:"#8B5CF6",name:"MCS Index",dot:!1,strokeWidth:2})]})})})};var components_StationDetails=e=>{let{station:t,timeSeriesData:s,localtime:r,onClose:l}=e,[n,o]=(0,i.useState)("packetLoss"),[c,d]=(0,i.useState)("all"),[m,x]=(0,i.useState)("all"),h=new Date(1e3*r).toLocaleString("en-US",{timeZone:"America/New_York",hour12:!0});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 w-[80%] max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-white",children:["Station Details: ",t.mac]}),(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-white",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-4 mb-6",children:[(0,a.jsx)(MetricCard,{title:"Local Time",value:h,icon:p.Z,status:"normal"}),(0,a.jsx)(MetricCard,{title:"Inactive Time",value:t.inactive,unit:"ms",icon:p.Z,status:"warning"}),(0,a.jsx)(MetricCard,{title:"RSSI",value:t.rssi,subValue:"Ant1: ".concat(t.rssi_ant[0]," dBm, Ant2: ").concat(t.rssi_ant[1]," dBm"),icon:g.Z,onClick:()=>o("rssi"),status:"warning"}),(0,a.jsx)(MetricCard,{title:"Packet Loss Ratio",value:t.pl_ratio.toFixed(2),icon:k.Z,onClick:()=>o("packetLoss"),status:"warning"}),(0,a.jsx)(MetricCard,{title:"MCS Index",value:t.mcs,icon:y.Z,onClick:()=>o("mcs"),status:"warning"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"rssi"===n?"RSSI ".concat("all"===c?"- Overall & Antennas":"rssi"===c?"- Overall":"ant1"===c?"- Antenna 1":"- Antenna 2"):"packetLoss"===n?"Packet Loss Ratio":"mcs"===n?"MCS Index":""}),"rssi"===n&&(0,a.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,a.jsx)("button",{onClick:()=>d("all"),className:"px-2 py-1 rounded ".concat("all"===c?"bg-blue-500":"bg-gray-700"),children:"Overall & Antennas"}),(0,a.jsx)("button",{onClick:()=>d("rssi"),className:"px-2 py-1 rounded ".concat("rssi"===c?"bg-blue-500":"bg-gray-700"),children:"Overall"}),(0,a.jsx)("button",{onClick:()=>d("ant1"),className:"px-2 py-1 rounded ".concat("ant1"===c?"bg-blue-500":"bg-gray-700"),children:"Antenna 1"}),(0,a.jsx)("button",{onClick:()=>d("ant2"),className:"px-2 py-1 rounded ".concat("ant2"===c?"bg-blue-500":"bg-gray-700"),children:"Antenna 2"})]}),"packetLoss"===n&&(0,a.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,a.jsx)("button",{onClick:()=>x("all"),className:"px-2 py-1 rounded ".concat("all"===m?"bg-blue-500":"bg-gray-700"),children:"All"}),(0,a.jsx)("button",{onClick:()=>x("pl"),className:"px-2 py-1 rounded ".concat("pl"===m?"bg-blue-500":"bg-gray-700"),children:"Packet Loss"}),(0,a.jsx)("button",{onClick:()=>x("retries"),className:"px-2 py-1 rounded ".concat("retries"===m?"bg-blue-500":"bg-gray-700"),children:"Retries"})]}),"rssi"===n?(0,a.jsx)(RssiChart,{data:s,displayChoice:c}):"packetLoss"===n?(0,a.jsx)(PacketLossChart,{data:s,displayChoice:m}):"mcs"===n?(0,a.jsx)(McsChart,{data:s}):null]})]})})};function parseLogFile(e){let t=e.split("\n").filter(e=>e.trim());return t.map(e=>{let t=JSON.parse(e).linkstate;return{localtime:t.sysinfo.localtime,timestamp:1e3*t.sysinfo.localtime,noise:parseFloat(t.noise),activity:t.activity,cpuLoad:t.sysinfo.cpu_load[0]/65535*100,cpuLoad5m:t.sysinfo.cpu_load[1]/65535*100,cpuLoad15m:t.sysinfo.cpu_load[2]/65535*100,memory:t.sysinfo.freemem/1048576,channel:t.oper_chan,frequency:t.oper_freq,channelWidth:t.chan_width,lnaStatus:t.lna_status,stations:t.sta_stats,meshNodes:t.mesh_stats}})}var v=s(9734),components_LogFileUpload=e=>{let{onFileLoaded:t}=e,s=(0,i.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files[0];handleFile(t)},[t]),r=(0,i.useCallback)(e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&handleFile(s)},[t]),handleFile=e=>{let s=new FileReader;s.onload=e=>{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result;t(a)},s.readAsText(e)};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto bg-gray-900 rounded-lg shadow-xl",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-800",children:(0,a.jsx)("img",{src:"/logo.png",alt:"Mesh Rider Logo",className:"h-12 mx-auto"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-8 text-center cursor-pointer hover:border-blue-500 transition-colors",onDragOver:e=>e.preventDefault(),onDrop:s,onClick:()=>{var e;return null===(e=document.getElementById("fileInput"))||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{type:"file",id:"fileInput",className:"hidden",accept:".log,.json,.txt",onChange:r}),(0,a.jsx)(k.Z,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"Upload Link Status Log File"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Drag and drop your log file here, or click to select"}),(0,a.jsxs)("div",{className:"flex items-center justify-center mt-4 text-sm text-gray-500",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-2"}),"Supports .log, .json, and .txt files"]})]})}),(0,a.jsxs)("div",{className:"p-6 bg-gray-800 rounded-b-lg",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-300 mb-4",children:"Setup Instructions"}),(0,a.jsx)("div",{className:"space-y-4",children:[{title:"Download Log File",description:"Download the 'Link Status Log' from Web GUI or Command Line (.tar.gz file)"},{title:"Extract Archive",description:"Extract the .tar.gz file into a folder (Right-click → Extract All in Windows)"},{title:"Locate Log File",description:"Navigate to: Downloads → longtermmon_smartradio-* → tmp → longtermlog → *.log"}].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:t+1}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("h5",{className:"text-gray-300 font-medium",children:e.title}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:e.description})]})]},t))})]})]})};function LinkStatusAnalyzer(e){var t;let{initialData:s}=e,[r,l]=(0,i.useState)(()=>s?parseLogFile(s):[]),[n,f]=(0,i.useState)(null),[b,k]=(0,i.useState)("noiseFloor"),[v,N]=(0,i.useState)(!1),handleMetricClick=e=>{var t;k(e),null===(t=document.getElementById("performance-graphs"))||void 0===t||t.scrollIntoView({behavior:"smooth",block:"start"})};if(0===r.length)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-950 flex flex-col items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"max-w-2xl w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"glowing-text text-white",children:"Link Status Log Analyzer"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Upload your SmartRadio log file to analyze performance metrics"})]}),(0,a.jsx)(components_LogFileUpload,{onFileLoaded:e=>{try{N(!0);let t=parseLogFile(e);l(t)}catch(e){console.error("Error parsing log file:",e)}finally{N(!1)}}})]})});let F=r[r.length-1],formatTimestamp=e=>new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0});return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:"/logo.png",alt:"Mesh Rider Logo",className:"h-12"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h1",{className:"glowing-text text-white text-2xl font-bold",children:"Link Status Analysis"}),(0,a.jsxs)("p",{className:"text-gray-400 mt-1",children:["Analyzing ",r.length," log entries"]})]})]}),(0,a.jsx)("button",{onClick:()=>l([]),className:"px-4 py-2 bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700",children:"Upload New File"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(MetricCard,{title:"Noise Floor",value:F.noise,unit:" dBm",icon:g.Z,status:F.noise>-75?"warning":"normal",onClick:()=>handleMetricClick("noiseFloor")}),(0,a.jsx)(MetricCard,{title:"Channel Activity",value:F.activity,unit:"%",icon:p.Z,status:F.activity>70?"warning":"normal",onClick:()=>handleMetricClick("activity")}),(0,a.jsx)(MetricCard,{title:"CPU Load",value:F.cpuLoad,unit:"%",icon:y.Z,status:F.cpuLoad>80?"warning":"normal",onClick:()=>handleMetricClick("cpu")}),(0,a.jsx)(MetricCard,{title:"Memory Available",value:F.memory,unit:" MB",icon:j.Z,status:"normal",onClick:()=>handleMetricClick("memory")})]}),(0,a.jsxs)("div",{id:"performance-graphs",className:"grid grid-cols-2 gap-6 mb-8",children:[("noiseFloor"===b||"activity"===b)&&(0,a.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg col-span-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"RF Performance"}),(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:r,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"timestamp",type:"number",domain:["auto","auto"],tickFormatter:formatTimestamp,stroke:"#9CA3AF"}),(0,a.jsx)(x.B,{yAxisId:"noise",domain:[-90,-50],stroke:"#60A5FA"}),(0,a.jsx)(x.B,{yAxisId:"activity",orientation:"right",domain:[0,100],stroke:"#34D399"}),(0,a.jsx)(h.u,{labelFormatter:e=>formatTimestamp(Number(e)),contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"0.5rem",color:"#F3F4F6"}}),(0,a.jsx)(u.x,{yAxisId:"noise",type:"monotone",dataKey:"noise",name:"Noise Floor",stroke:"#60A5FA",dot:!1}),(0,a.jsx)(u.x,{yAxisId:"activity",type:"monotone",dataKey:"activity",name:"Activity",stroke:"#34D399",dot:!1})]})})})]}),"cpu"===b&&(0,a.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg col-span-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"System Performance"}),(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:r,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"timestamp",type:"number",domain:["auto","auto"],tickFormatter:e=>new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),stroke:"#9CA3AF"}),(0,a.jsx)(x.B,{domain:[0,100],stroke:"#9CA3AF"}),(0,a.jsx)(h.u,{labelFormatter:e=>formatTimestamp(Number(e)),contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"0.5rem",color:"#F3F4F6"}}),(0,a.jsx)(u.x,{type:"monotone",dataKey:"cpuLoad",name:"CPU Load",stroke:"#A78BFA",dot:!1}),(0,a.jsx)(u.x,{type:"monotone",dataKey:"cpuLoad5m",name:"CPU Load (5m)",stroke:"#EC4899",dot:!1}),(0,a.jsx)(u.x,{type:"monotone",dataKey:"cpuLoad15m",name:"CPU Load (15m)",stroke:"#F59E0B",dot:!1})]})})})]}),"memory"===b&&(0,a.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg col-span-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Memory Usage"}),(0,a.jsx)("div",{className:"h-80",children:(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:r,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"timestamp",type:"number",domain:["auto","auto"],tickFormatter:e=>new Date(e).toLocaleTimeString("en-US"),stroke:"#9CA3AF"}),(0,a.jsx)(x.B,{domain:[0,"auto"],stroke:"#9CA3AF"}),(0,a.jsx)(h.u,{labelFormatter:e=>formatTimestamp(Number(e)),contentStyle:{backgroundColor:"#1F2937",border:"none",borderRadius:"0.5rem",color:"#F3F4F6"}}),(0,a.jsx)(u.x,{type:"monotone",dataKey:"memory",name:"Available Memory",stroke:"#F87171",dot:!1})]})})})]})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(components_MeshVisualization,{meshStats:F.meshNodes,onNodeClick:e=>{let t=F.stations.find(t=>t.mac===e);t&&f(t)}})}),(0,a.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Connected Stations (",F.stations.length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:F.stations.map(e=>{let t=e.rssi>-65?"good":e.rssi>-75?"fair":"poor",s=e.pl_ratio<1?"good":e.pl_ratio<2?"fair":"poor";return(0,a.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg cursor-pointer hover:bg-gray-750 transition-colors",onClick:()=>f(e),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-white font-medium flex items-center",children:[e.mac,(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs rounded-full ".concat("good"===t?"bg-green-900 text-green-300":"fair"===t?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"),children:t.toUpperCase()})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 mt-1",children:[(0,a.jsxs)("span",{className:"mr-4",children:["RSSI: ",e.rssi," dBm"]}),(0,a.jsxs)("span",{className:"mr-4",children:["MCS: ",e.mcs]}),(0,a.jsxs)("span",{children:["Inact: ",e.inactive,"ms"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Ant1: ",e.rssi_ant[0]," dBm, Ant2: ",e.rssi_ant[1]," dBm"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"TX: "}),(0,a.jsxs)("span",{className:"text-white",children:[(e.tx_bytes/1024).toFixed(2)," KB"]})]}),(0,a.jsxs)("div",{className:"text-sm ".concat("good"===s?"text-green-400":"fair"===s?"text-yellow-400":"text-red-400"),children:["PL: ",e.pl_ratio.toFixed(2)]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:["Retries: ",e.tx_retries]})]})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Click for detailed statistics and packet loss graph"})]},e.mac)})})]}),n&&(0,a.jsx)(components_StationDetails,{station:F.stations.find(e=>e.mac===n.mac)||n,timeSeriesData:(t=n.mac,r.map(e=>{let s=e.stations.find(e=>e.mac===t);return s?{timestamp:e.timestamp,...s}:null}).filter(e=>e&&void 0!==e.rssi)),localtime:F.localtime,onClose:()=>f(null)})]})})}function Page(){return(0,a.jsx)("main",{className:"min-h-screen",children:(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(LinkStatusAnalyzer,{initialData:'{ "linkstate": {"sysinfo":{"cpu_load":[17120,15712,13600],"freemem":12693504,"localtime":1651865198},"oper_chan":9,"oper_freq":2452,"chan_width":"26","noise":"-79.565010","activity":24,"lna_status":"1","sta_stats":[],"mesh_stats":[]} }\n{ "linkstate": {"sysinfo":{"cpu_load":[15744,15424,13504],"freemem":12636160,"localtime":1651865202},"oper_chan":9,"oper_freq":2452,"chan_width":"26","noise":"-84.366287","activity":24,"lna_status":"1","sta_stats":[],"mesh_stats":[]} }'})})})}}},function(e){e.O(0,[50,971,472,744],function(){return e(e.s=2679)}),_N_E=e.O()}]);